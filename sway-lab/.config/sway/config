# Sway configuration
# Read `man 5 sway` for a complete reference.

### Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $filebrowser thunar
set $browser firefox

# Terminal and menu configuration
set $term kitty
set $menu exec rofi -show drun

# Styled lock screen (Flexoki colors)
set $lock swaylock \
    --image ~/wallpapers/wallpapers/wall72.png \
    --scaling fill \
    --color 100f0f \
    --inside-color 282726 \
    --inside-clear-color 24837b \
    --inside-ver-color ad8301 \
    --inside-wrong-color af3029 \
    --ring-color cecdc3 \
    --ring-clear-color 24837b \
    --ring-ver-color ad8301 \
    --ring-wrong-color af3029 \
    --key-hl-color 24837b \
    --bs-hl-color af3029 \
    --separator-color 100f0f \
    --text-color cecdc3 \
    --text-clear-color cecdc3 \
    --text-ver-color cecdc3 \
    --text-wrong-color cecdc3 \
    --indicator-radius 100 \
    --indicator-thickness 10 \
    --font "JetBrainsMono Nerd Font"

# Workspace names for better organization
set $ws1 "1:term"
set $ws2 "2:web"
set $ws3 "3"
set $ws4 "4:files"
set $ws5 "5"
set $ws6 "6:code"
set $ws7 "7:notes"
set $ws8 "8:chat"
set $ws9 "9"
set $ws10 "10:spot"

### Flexoki Color Scheme Variables
set $bg0     #100f0f
set $bg1     #282726
set $fg      #cecdc3
set $green   #66800b
set $blue    #205ea6
set $yellow  #ad8301
set $gray    #928374
set $red     #af3029
set $magenta #5e409d
set $cyan    #24837b
set $white   #fffcf0
set $orange  #bc5215

### Output Configuration
# Dual monitor configuration
# LG HDR 4K on the left
output DP-1 resolution 3840x2160 position 0,0 scale 1

# Acer KG272K on the right, rotated vertically
output DP-2 resolution 3840x2160 transform 90 position 3840,0 scale 1.25

### Workspace Display Assignment
# Workspaces 1-5 on left monitor (DP-1)
workspace $ws1 output DP-1
workspace $ws2 output DP-1
workspace $ws3 output DP-1
workspace $ws4 output DP-1
workspace $ws5 output DP-1

# Workspaces 6-10 on right monitor (DP-2)
workspace $ws6 output DP-2
workspace $ws7 output DP-2
workspace $ws8 output DP-2
workspace $ws9 output DP-2
workspace $ws10 output DP-2

### Font Configuration
font pango:JetBrainsMono Nerd Font 12

### Input Configuration
input type:keyboard {
    xkb_layout "us"
    xkb_options "caps:super,compose:ralt"
}

### Window Focus & Movement
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

bindsym $mod+q kill
bindsym $mod+f fullscreen
bindsym $mod+space focus mode_toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+a focus parent

### Workspaces (plain, no SOV)
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# Prev/next workspace
bindsym $mod+Ctrl+Left  exec swaymsg workspace prev
bindsym $mod+Ctrl+Right exec swaymsg workspace next
bindsym $mod+Ctrl+$left  exec swaymsg workspace prev
bindsym $mod+Ctrl+$right exec swaymsg workspace next

### Layout Controls
bindsym $mod+b splith
bindsym $mod+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

### Launchers
# Core applications
bindsym $mod+Return exec $term
bindsym $mod+shift+Return exec foot
bindsym $mod+d exec $menu
bindsym $mod+shift+f exec $filebrowser
bindsym $mod+shift+b exec $browser

# Editors / IDEs
bindsym $mod+c exec vscodium
bindsym $mod+z exec zed

# Manual lock
bindsym $mod+Shift+x exec $lock

# Directory containing your wallpapers
set $wallpapers ~/wallpapers

# Keybinding: switch wallpaper to a random file from the folder (no swww)
bindsym $mod+Shift+w exec swaybg -m fill -i $(find $wallpapers -type f | shuf -n 1)

# Clipboard history
bindsym $mod+Shift+v exec cliphist list | wofi -dmenu | cliphist decode | wl-copy

# Session controls
bindsym $mod+Shift+r reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
bindsym $mod+Shift+Escape exec ~/.config/sway/scripts/powermenu.sh

### Tools & Utilities
# Screenshots (Wayland-native for multi-monitor support)
bindsym $mod+Shift+s exec ~/.config/sway/scripts/screenshot.sh region
bindsym $mod+Shift+p exec ~/.config/sway/scripts/screenshot.sh full

# Toggle autotiling on/off
bindsym $mod+Shift+t exec pgrep autotiling && pkill autotiling || autotiling --splitratio 1.61

### Focus behavior
focus_follows_mouse no

### Gaps
gaps inner 10
gaps outer 5
smart_gaps off
smart_borders off

bindsym $mod+comma  gaps inner all minus 5
bindsym $mod+period gaps inner all plus 5
bindsym $mod+Shift+comma  gaps outer all minus 5
bindsym $mod+Shift+period gaps outer all plus 5

### Media & Hardware Keys
# Volume controls (using pamixer)
bindsym --locked XF86AudioRaiseVolume exec pamixer -i 5
bindsym --locked XF86AudioLowerVolume exec pamixer -d 5
bindsym --locked XF86AudioMute exec pamixer -t
bindsym --locked XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Brightness controls
set $brightness_notification_cmd command -v notify-send >/dev/null && \
    VALUE=$(brightnessctl --percentage get) && \
    notify-send -e -h string:x-canonical-private-synchronous:brightness \
        -h "int:value:$VALUE" -t 800 "Brightness: ${VALUE}%"
bindsym XF86MonBrightnessDown exec 'STEP="$brightness_step" && brightnessctl -q set ${STEP:-5}%- && $brightness_notification_cmd'
bindsym XF86MonBrightnessUp exec 'STEP="$brightness_step" && brightnessctl -q set +${STEP:-5}% && $brightness_notification_cmd'

# Media player controls
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioStop exec playerctl stop
bindsym XF86AudioForward exec playerctl position +10
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioRewind exec playerctl position -10

### Mouse Controls
floating_modifier $mod normal

### Resize Mode
mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

### Window Rules
# Floating window rules
for_window [app_id="pavucontrol"] floating enable, move position center, resize set 600 400
for_window [app_id="org.gnome.DiskUtility"] floating enable, move position center
for_window [title="Picture-in-Picture"] floating enable, sticky enable

### Bar (Waybar)
bar {
    swaybar_command waybar
}

### Borders and Colors (Flexoki theme)
# Focused window border (cyan/teal)
client.focused $cyan $bg1 $fg $yellow $cyan

# Unfocused window border
client.unfocused $bg0 $bg1 $gray $bg0 $bg1

# Urgent window border (red)
client.urgent $red $bg1 $fg $yellow $red

# Border settings
default_border pixel 3
titlebar_padding 8 2
titlebar_border_thickness 2

### Idle & Lock Configuration
exec swayidle -w \
    timeout 300 '$lock' \
    timeout 600 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"' \
    before-sleep '$lock'

### Autostart
# Notifications
exec_always swaync

# Network manager tray icon
exec nm-applet --indicator

# Bluetooth manager tray
exec blueman-applet

# Clipboard history
exec wl-paste --type text --watch cliphist store &
exec wl-paste --type image --watch cliphist store &

# Automatic tiling with golden ratio
exec_always $HOME/.local/bin/autotiling -o DP-1 --splitratio 1.61 --limit 2

# Optional: set an initial wallpaper at login (uses $wallpapers)
exec_always swaybg -m fill -i $wallpapers/wall62.png

# Day/night color temperature adjustment (North Liberty, IA)
exec wlsunset -l 41.7 -L -91.6


### Include system defaults
include /etc/sway/config.d/*
include ~/.config/sway/config.d/*

# Custom Sway configuration (Debian 13 Trixie)
# Copy this to ~/.config/sway/config
# Read `man 5 sway` for a complete reference.

### Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $filebrowser thunar
set $browser firefox

# Terminal and menu configuration
set $term kitty
set $rofi_cmd rofi -terminal '$term'
set $menu $rofi_cmd -show combi -combi-modes drun#run -modes combi

# Workspace names for better organization
set $ws1 "1:term"
set $ws2 "2:web"
set $ws3 "3"
set $ws4 "4:files"
set $ws5 "5"
set $ws6 "6:code"
set $ws7 "7:notes"
set $ws8 "8:chat"
set $ws9 "9"
set $ws10 "10:spot"

### Output Configuration
# Default wallpaper
output * bg ~/wallpapers/walls09.png fill

# Dual monitor configuration
# LG HDR 4K on the left
output DP-1 resolution 3840x2160 position 0,0 scale 1

# Acer KG272K on the right, rotated vertically
output DP-2 resolution 3840x2160 transform 90 position 3840,0 scale 1

### Workspace Display Assignment
# Workspaces 1-5 on left monitor (DP-1)
workspace $ws1 output DP-1
workspace $ws2 output DP-1
workspace $ws3 output DP-1
workspace $ws4 output DP-1
workspace $ws5 output DP-1

# Workspaces 6-10 on right monitor (DP-2)
workspace $ws6 output DP-2
workspace $ws7 output DP-2
workspace $ws8 output DP-2
workspace $ws9 output DP-2
workspace $ws10 output DP-2

### Input Configuration
input type:keyboard {
    xkb_layout "us"
    xkb_options "caps:super,compose:ralt"
}

### Window Focus & Movement
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

bindsym $mod+q kill
bindsym $mod+Shift+f fullscreen
bindsym $mod+space focus mode_toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+a focus parent

### Workspaces
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# Prev/next workspace
bindsym $mod+Ctrl+Left  exec swaymsg workspace prev
bindsym $mod+Ctrl+Right exec swaymsg workspace next
bindsym $mod+Ctrl+$left  exec swaymsg workspace prev
bindsym $mod+Ctrl+$right exec swaymsg workspace next

### Layout Controls
bindsym $mod+b splith
bindsym $mod+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

### Launchers
# Core applications
bindsym $mod+Return exec $term
bindsym $mod+d exec $menu
bindsym $mod+f exec $filebrowser

# Editors / IDEs
bindsym $mod+c exec codium
bindsym $mod+x exec subl

# Session controls
bindsym $mod+Shift+r reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

### Tools & Utilities
# Screenshots (Wayland-native for multi-monitor support)
bindsym $mod+Shift+s exec grim -g "$(slurp)" - | tee >(wl-copy) | swappy -f -
bindsym Print exec grim ~/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png

### Focus behavior
focus_follows_mouse no

### Gaps
gaps inner 10
gaps outer 5
smart_gaps on
smart_borders on

bindsym $mod+comma  gaps inner all minus 5
bindsym $mod+period gaps inner all plus 5
bindsym $mod+Shift+comma  gaps outer all minus 5
bindsym $mod+Shift+period gaps outer all plus 5

### Media & Hardware Keys

# Volume controls (Debian-compatible using pamixer)
bindsym --locked XF86AudioRaiseVolume exec pamixer -i 5
bindsym --locked XF86AudioLowerVolume exec pamixer -d 5
bindsym --locked XF86AudioMute exec pamixer -t
bindsym --locked XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Brightness controls
set $brightness_notification_cmd command -v notify-send >/dev/null && \
    VALUE=$(brightnessctl --percentage get) && \
    notify-send -e -h string:x-canonical-private-synchronous:brightness \
        -h "int:value:$VALUE" -t 800 "Brightness: ${VALUE}%"
bindsym XF86MonBrightnessDown exec 'STEP="$brightness_step" && brightnessctl -q set ${STEP:-5}%- && $brightness_notification_cmd'
bindsym XF86MonBrightnessUp exec 'STEP="$brightness_step" && brightnessctl -q set +${STEP:-5}% && $brightness_notification_cmd'

# Media player controls
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioStop exec playerctl stop
bindsym XF86AudioForward exec playerctl position +10
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioRewind exec playerctl position -10

### Mouse Controls
floating_modifier $mod normal

### Resize Mode
mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

### Bar (Waybar)
bar {
    swaybar_command waybar
}

### Idle & Lock Configuration
exec LT="$lock_timeout" ST="$screen_timeout" LT=${LT:-300} ST=${ST:-60} && \
    swayidle -w \
        timeout $LT 'swaylock -f' \
        timeout $((LT + ST)) 'swaymsg "output * power off"' \
                      resume 'swaymsg "output * power on"'  \
        timeout $ST 'pgrep -xu "$USER" swaylock >/dev/null && swaymsg "output * power off"' \
             resume 'pgrep -xu "$USER" swaylock >/dev/null && swaymsg "output * power on"'  \
        before-sleep 'swaylock -f' \
        lock 'swaylock -f' \
        unlock 'pkill -xu "$USER" -SIGUSR1 swaylock'

### Autostart
# Notifications
exec_always swaync

### Include system defaults (Debian-compatible)
include /etc/sway/config.d/*
include ~/.config/sway/config.d/*
